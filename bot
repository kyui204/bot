import discord
from discord.ext import commands
from discord import app_commands
import random
import string

# è¨­å®š
GUILD_ID = 1338038462837821501
ROLE_ID = 1412025175976968244
TICKET_ROLE_ID = 123456789012345678
TICKET_CATEGORY_ID = 987654321098765432

intents = discord.Intents.all()
bot = commands.Bot(command_prefix="!", intents=intents)

role_backups = {}
paypay_links = {}
reply_dict = {
    GUILD_ID: {
        "ã“ã‚“ã«ã¡ã¯": "ã‚„ã‚ï¼å…ƒæ°—ï¼Ÿ",
        "åŠ©ã‘ã¦": "ä½•ã‹å›°ã£ã¦ã‚‹ï¼Ÿã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆï¼"
    }
}

intents = discord.Intents.all()
bot = commands.Bot(command_prefix="!", intents=intents)

reply_dict = {}
role_backups = {}
paypay_links = {}

ROLE_ID = 123456789012345678  # èªè¨¼ãƒ­ãƒ¼ãƒ«ID
TICKET_ROLE_ID = 123456789012345678  # ãƒã‚±ãƒƒãƒˆå¯¾å¿œãƒ­ãƒ¼ãƒ«ID
TICKET_CATEGORY_ID = 123456789012345678  # ãƒã‚±ãƒƒãƒˆç”¨ã‚«ãƒ†ã‚´ãƒªID

@bot.event
async def on_ready():
    await bot.tree.sync()
    bot.add_view(VerifyButtonView())
    bot.add_view(PersistentBackupView())
    bot.add_view(TicketView())
    print(f"âœ… ãƒ­ã‚°ã‚¤ãƒ³ã‚’æ‰¿èªã—ã¾ã—ãŸã€‚: {bot.user}")

@bot.event
async def on_message(message):
    if message.author.bot or not message.guild:
        return
    guild_id = message.guild.id
    if guild_id in reply_dict:
        for keyword, response in reply_dict[guild_id].items():
            if keyword in message.content:
                await message.channel.send(response)
                break
    await bot.process_commands(message)

class VerifyModal(discord.ui.Modal):
    def __init__(self, num1, num2):
        super().__init__(title="èªè¨¼ã‚¯ã‚¤ã‚º")
        self.num1 = num1
        self.num2 = num2
        self.answer_input = discord.ui.TextInput(
            label=f"{num1} + {num2} = ?", placeholder="ç­”ãˆã‚’å…¥åŠ›ã—ã¦ã­ï¼"
        )
        self.add_item(self.answer_input)

    async def on_submit(self, interaction: discord.Interaction):
        try:
            user_answer = int(self.answer_input.value)
            correct = self.num1 + self.num2
            if user_answer == correct:
                role = interaction.guild.get_role(ROLE_ID)
                if role:
                    await interaction.user.add_roles(role)
                    await interaction.response.send_message("âœ… èªè¨¼æˆåŠŸï¼ãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸ã—ãŸã‚ˆï¼ï¼")
                else:
                    await interaction.response.send_message("âš ï¸ èªè¨¼ãƒ­ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚ˆï¼")
            else:
                await interaction.response.send_message("âŒ ä¸æ­£è§£ï¼ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã­ï¼")
        except ValueError:
            await interaction.response.send_message("âš ï¸ æ•°å­—ã§ç­”ãˆã¦ã­ï¼")

class VerifyButtonView(discord.ui.View):
    def __init__(self):
        super().__init__(timeout=None)

    @discord.ui.button(label="èªè¨¼ã™ã‚‹", style=discord.ButtonStyle.success, custom_id="verify_button")
    async def verify_button(self, button: discord.ui.Button, interaction: discord.Interaction):
        num1 = random.randint(1, 9)
        num2 = random.randint(1, 9)
        await interaction.response.send_modal(VerifyModal(num1, num2))

class PersistentBackupView(discord.ui.View):
    def __init__(self):
        super().__init__(timeout=None)

    @discord.ui.button(label="ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—", style=discord.ButtonStyle.primary, custom_id="persistent_backup_button")
    async def backup_button(self, button: discord.ui.Button, interaction: discord.Interaction):
        roles = [role.id for role in interaction.user.roles if role.name != "@everyone"]
        code = ''.join(random.choices(string.ascii_letters + string.digits, k=16))
        role_backups[code] = {
            "user_id": interaction.user.id,
            "roles": roles
        }
        await interaction.response.send_message(f"âœ… ãƒ­ãƒ¼ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ãŸã‚ˆï¼\nå¾©å…ƒã‚³ãƒ¼ãƒ‰: `{code}`")

class DeleteTicketView(discord.ui.View):
    def __init__(self):
        super().__init__(timeout=None)

    @discord.ui.button(label="ğŸ—‘ï¸ ãƒã‚±ãƒƒãƒˆã‚’å‰Šé™¤", style=discord.ButtonStyle.red, custom_id="delete_ticket")
    async def delete_ticket(self, button: discord.ui.Button, interaction: discord.Interaction):
        has_admin = interaction.user.guild_permissions.administrator
        has_role = discord.utils.get(interaction.user.roles, id=TICKET_ROLE_ID)
        if not has_admin and not has_role:
            await interaction.response.send_message("âŒ ã“ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å‰Šé™¤ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ï¼")
            return
        await interaction.channel.delete()

class TicketView(discord.ui.View):
    def __init__(self):
        super().__init__(timeout=None)

    @discord.ui.button(label="ğŸ« ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ", style=discord.ButtonStyle.green, custom_id="create_ticket")
    async def create_ticket(self, button: discord.ui.Button, interaction: discord.Interaction):
        guild = interaction.guild
        category = discord.utils.get(guild.categories, id=TICKET_CATEGORY_ID)
        overwrites = {
            guild.default_role: discord.PermissionOverwrite(view_channel=False),
            interaction.user: discord.PermissionOverwrite(view_channel=True, send_messages=True),
            discord.Object(id=TICKET_ROLE_ID): discord.PermissionOverwrite(view_channel=True, send_messages=True)
        }
        channel = await guild.create_text_channel(
            name=f"ticket-{interaction.user.name}",
            category=category,
            overwrites=overwrites
        )
        embed = discord.Embed(
            title="ğŸ« ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸ",
            description=f"{interaction.user.mention} ã®ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚\n<@&{TICKET_ROLE_ID}> å¯¾å¿œãŠé¡˜ã„ã—ã¾ã™ã€‚",
            color=discord.Color.orange()
        )
        await channel.send(content=f"{interaction.user.mention}", embed=embed, view=DeleteTicketView())
        await interaction.response.send_message(f"âœ… ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼ â†’ {channel.mention}")

@bot.tree.command(name="say", description="Botã«å¥½ããªè¨€è‘‰ã‚’è¨€ã‚ã›ã‚‹")
@app_commands.describe(message="Botã«è¨€ã‚ã›ãŸã„è¨€è‘‰")
async def say(interaction: discord.Interaction, message: str):
    await interaction.response.send_message(message)

@bot.tree.command(name="role_backup", description="ãƒ­ãƒ¼ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã™")
async def backup(interaction: discord.Interaction):
    await interaction.response.send_message("ãƒ­ãƒ¼ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ï¼š", view=PersistentBackupView())

@bot.tree.command(name="role_restore", description="ãƒ­ãƒ¼ãƒ«ã‚’å¾©å…ƒã—ã¾ã™")
@app_commands.describe(code="å¾©å…ƒã‚³ãƒ¼ãƒ‰")
async def restore(interaction: discord.Interaction, code: str):
    data = role_backups.get(code)
    if not data:
        await interaction.response.send_message("âŒ ç„¡åŠ¹ãªã‚³ãƒ¼ãƒ‰ã ã‚ˆï¼")
        return
    target_user = interaction.guild.get_member(data["user_id"])
    if not target_user:
        await interaction.response.send_message("âŒ å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã‚ˆï¼")
        return
    roles_to_add = [discord.utils.get(interaction.guild.roles, id=rid) for rid in data["roles"]]
    roles_to_add = [r for r in roles_to_add if r]
    await target_user.edit(roles=roles_to_add)
    await interaction.response.send_message(f"âœ… {target_user.mention} ã«ãƒ­ãƒ¼ãƒ«ã‚’å¾©å…ƒã—ãŸã‚ˆï¼")

@bot.tree.command(name="user_ban", description="æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’BANã—ã¾ã™")
@app_commands.describe(member="BANã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼", reason="BANã®ç†ç”±")
async def ban(interaction: discord.Interaction, member: discord.Member, reason: str = "ç†ç”±ãªã—"):
    if not interaction.user.guild_permissions.ban_members:
        await interaction.response.send_message("âŒ æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ï¼")
        return
    await member.ban(reason=reason)
    await interaction.response.send_message(f"{member.mention} ã‚’BANã—ã¾ã—ãŸã€‚ç†ç”±: {reason}")

@bot.tree.command(name="paypay_set", description="è‡ªåˆ†ã®PayPayãƒªãƒ³ã‚¯ã‚’ç™»éŒ²ã—ã¾ã™")
@app_commands.describe(link="ç™»éŒ²ã™ã‚‹PayPayãƒªãƒ³ã‚¯")
async def setpaypay(interaction: discord.Interaction, link: str):
    if not (link.startswith("https://paypay.ne.jp/") or link.startswith("https://qr.paypay.ne.jp/")):
        await interaction.response.send_message("âŒ æœ‰åŠ¹ãªPayPayãƒªãƒ³ã‚¯ã‚’å…¥åŠ›ã—ã¦ã­ï¼")
        return
    paypay_links[interaction.user.id] = link
    await interaction.response.send_message("âœ… PayPayãƒªãƒ³ã‚¯ã‚’ç™»éŒ²ã—ãŸã‚ˆï¼")

@bot.tree.command(name="paypay_lick", description="ç™»éŒ²æ¸ˆã¿ã®PayPayãƒªãƒ³ã‚¯ã‚’é€ä¿¡ã—ã¾ã™")
async def paypay(interaction: discord.Interaction):
    link = paypay_links.get(interaction.user.id)
    if not link:
        await interaction.response.send_message("âŒ ã¾ã PayPayãƒªãƒ³ã‚¯ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„ã‚ˆï¼å…ˆã« `/setpaypay` ã‚’ä½¿ã£ã¦ç™»éŒ²ã—ã¦ã­ï¼")
        return
    embed = discord.Embed(
        title="ğŸ“² PayPayé€é‡‘ãƒªãƒ³ã‚¯",
        description="ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰é€é‡‘ã§ãã¾ã™ã€‚",
        color=0x00c3ff
    )
    embed.add_field(name="ãƒªãƒ³ã‚¯", value=f"[ã“ã¡ã‚‰ã‚’ã‚¯ãƒªãƒƒã‚¯]({link})", inline=False)
    embed.set_footer(text="å®‰å…¨ãªé€é‡‘ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ï¼")
    await interaction.response.send_message(embed=embed)

@bot.tree.command(name="server_info", description="ã“ã®ã‚µãƒ¼ãƒãƒ¼ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™")
async def serverinfo(interaction: discord.Interaction):
    guild = interaction.guild
    text_channels = guild.text_channels
    voice_channels = guild.voice_channels
    categories = guild.categories
    humans = len([m for m in guild.members if not m.bot])
    bots = len([m for m in guild.members if m.bot])

    # ãƒ¡ã‚¤ãƒ³ã®Embed
    embed = discord.Embed(
        title=f"ğŸ“Š ã‚µãƒ¼ãƒãƒ¼æƒ…å ±: {guild.name}",
        color=discord.Color.blue()
    )
    embed.add_field(name="ğŸ†” ã‚µãƒ¼ãƒãƒ¼ID", value=str(guild.id), inline=True)
    embed.add_field(name="ğŸ‘‘ ã‚ªãƒ¼ãƒŠãƒ¼", value=guild.owner.mention, inline=True)
    embed.add_field(name="ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼æ•°", value=f"äººé–“: {humans}\nBot: {bots}", inline=False)
    embed.add_field(name="ğŸ“ ã‚«ãƒ†ã‚´ãƒªãƒ¼æ•°", value=str(len(categories)), inline=True)
    embed.add_field(name="ğŸ’¬ ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ãƒãƒ«", value=str(len(text_channels)), inline=True)
    embed.add_field(name="ğŸ”Š ãƒœã‚¤ã‚¹ãƒãƒ£ãƒ³ãƒãƒ«", value=str(len(voice_channels)), inline=True)
    embed.add_field(name="ğŸš€ ãƒ–ãƒ¼ã‚¹ãƒˆ", value=f"ãƒ¬ãƒ™ãƒ« {guild.premium_tier}ï¼ˆ{guild.premium_subscription_count} å›ï¼‰", inline=True)
    embed.add_field(name="ğŸ“… ä½œæˆæ—¥", value=guild.created_at.strftime("%Y/%m/%d %H:%M"), inline=True)

    await interaction.response.send_message(embed=embed)

    # ãƒ­ãƒ¼ãƒ«ä¸€è¦§ï¼ˆ@everyone ã‚’é™¤å¤–ï¼‰
    role_lines = []
    for role in guild.roles:
        if role.name != "@everyone":
            count = len(role.members)
            role_name = role.name[:20].ljust(20)
            role_lines.append(f"`{role_name}` | {count}äºº")

    # Embedåˆ†å‰²é€ä¿¡ï¼ˆ1024æ–‡å­—åˆ¶é™ã«å¯¾å¿œï¼‰
    chunk = ""
    embeds = []
    for line in role_lines:
        if len(chunk) + len(line) + 1 > 1024:
            embeds.append(discord.Embed(
                title="ğŸ­ ãƒ­ãƒ¼ãƒ«ä¸€è¦§ï¼ˆç¶šãï¼‰",
                description=chunk,
                color=discord.Color.green()
            ))
            chunk = ""
        chunk += line + "\n"

    if chunk:
        embeds.append(discord.Embed(
            title="ğŸ­ ãƒ­ãƒ¼ãƒ«ä¸€è¦§ï¼ˆç¶šãï¼‰",
            description=chunk,
            color=discord.Color.green()
        ))

    for e in embeds:
        await interaction.followup.send(embed=e)


@bot.tree.command(name="channel_delete", description="ã“ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å‰Šé™¤ã—ã¾ã™")
async def delete_channel(interaction: discord.Interaction):
    if interaction.user.guild_permissions.manage_channels:
        await interaction.response.send_message("ã“ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã€‚")
        await interaction.channel.delete()
    else:
        await interaction.response.send_message("ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å‰Šé™¤ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚")

@bot.tree.command(name="ticket_panel", description="ãƒã‚±ãƒƒãƒˆä½œæˆãƒ‘ãƒãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™")
async def ticket_panel(interaction: discord.Interaction):
    embed = discord.Embed(
        title="ğŸ« ãƒã‚±ãƒƒãƒˆä½œæˆ",
        description="å•é¡Œã‚„è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚",
        color=discord.Color.blue()
    )
    await interaction.response.send_message(embed=embed, view=TicketView())

@bot.tree.command(name="bot_info", description="ã“ã®ãƒœãƒƒãƒˆã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™")
async def botinfo(interaction: discord.Interaction):
    server_count = len(bot.guilds)
    permissions = interaction.guild.me.guild_permissions

    # æ¨©é™ãƒ†ã‚­ã‚¹ãƒˆ
    perm_text = ""
    important_perms = [
        ("ç®¡ç†è€…", permissions.administrator),
        ("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç®¡ç†", permissions.manage_messages),
        ("ãƒãƒ£ãƒ³ãƒãƒ«ã®ç®¡ç†", permissions.manage_channels),
        ("ãƒ­ãƒ¼ãƒ«ã®ç®¡ç†", permissions.manage_roles),
        ("Webhookã®ä½¿ç”¨", permissions.manage_webhooks),
        ("çµµæ–‡å­—ã®ç®¡ç†", permissions.manage_emojis_and_stickers),
        ("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡", permissions.send_messages),
        ("ãƒ•ã‚¡ã‚¤ãƒ«ã®æ·»ä»˜", permissions.attach_files),
        ("åŸ‹ã‚è¾¼ã¿ãƒªãƒ³ã‚¯", permissions.embed_links),
    ]
    for name, value in important_perms:
        perm_text += f"{name}: {'âœ…' if value else 'âŒ'}\n"

    # ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
    commands = bot.tree.get_commands()
    command_list = "\n".join([f"/{cmd.name} - {cmd.description}" for cmd in commands])
    if len(command_list) > 1024:
        command_list = command_list[:1020] + "..."

    embed = discord.Embed(
        title="ğŸ¤– ãƒœãƒƒãƒˆæƒ…å ±",
        color=discord.Color.purple()
    )
    embed.add_field(name="ğŸŒ å‚åŠ ã‚µãƒ¼ãƒãƒ¼æ•°", value=f"{server_count} ã‚µãƒ¼ãƒãƒ¼", inline=True)
    embed.add_field(name="ğŸ” æ¨©é™ä¸€è¦§", value=perm_text, inline=False)
    embed.add_field(name="ğŸ“š ä½¿ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰", value=command_list or "ãªã—", inline=False)

    await interaction.response.send_message(embed=embed)

@bot.event
async def on_member_join(member):
    if member.bot:
        await member.kick(reason="Botã®å‚åŠ ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™")

from discord import app_commands, Interaction, ui
import discord

class ClearModal(ui.Modal, title="ğŸ§¹ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤"):
    count = ui.TextInput(
        label="å‰Šé™¤ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ï¼ˆæœ€å¤§100ï¼‰",
        placeholder="ä¾‹: 10",
        max_length=3
    )

    async def on_submit(self, interaction: Interaction):
        try:
            num = int(self.count.value)
            if num < 1 or num > 100:
                await interaction.response.send_message("âš ï¸ 1ã€œ100ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", ephemeral=True)
                return

            # æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
            if not interaction.guild.me.guild_permissions.manage_messages:
                await interaction.response.send_message("âš ï¸ Botã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚", ephemeral=True)
                return

            deleted = await interaction.channel.purge(limit=num)
            await interaction.response.send_message(f"âœ… {len(deleted)} ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚", ephemeral=True)

        except ValueError:
            await interaction.response.send_message("âš ï¸ æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", ephemeral=True)

@bot.tree.command(name="clear", description="æŒ‡å®šã—ãŸä»¶æ•°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¾ã™ï¼ˆæœ€å¤§100ä»¶ï¼‰")
async def clear(interaction: Interaction):
    await interaction.response.send_modal(ClearModal())

from discord import app_commands, Interaction, Member, ui
import discord

class KickModal(ui.Modal, title="ğŸ‘¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚­ãƒƒã‚¯"):
    reason = ui.TextInput(
        label="ã‚­ãƒƒã‚¯ã®ç†ç”±ï¼ˆã‚µãƒ¼ãƒãƒ¼ã«è¨˜éŒ²ã•ã‚Œã¾ã™ï¼‰",
        placeholder="ä¾‹: ãƒ«ãƒ¼ãƒ«é•åã®ãŸã‚",
        required=True,
        max_length=200
    )
    dm_message = ui.TextInput(
        label="DMã§é€ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰",
        placeholder="ä¾‹: ã‚µãƒ¼ãƒãƒ¼ã®ãƒ«ãƒ¼ãƒ«é•åã«ã‚ˆã‚Šã‚­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚",
        required=False,
        max_length=500,
        style=discord.TextStyle.paragraph
    )

    def __init__(self, target: Member):
        super().__init__()
        self.target = target

    async def on_submit(self, interaction: Interaction):
        try:
            # DMé€ä¿¡ï¼ˆå¤±æ•—ã—ã¦ã‚‚ç„¡è¦–ï¼‰
            if self.dm_message.value:
                try:
                    await self.target.send(self.dm_message.value)
                except:
                    pass

            # ã‚­ãƒƒã‚¯å®Ÿè¡Œ
            await self.target.kick(reason=self.reason.value)
            await interaction.response.send_message(
                f"âœ… {self.target.mention} ã‚’ã‚­ãƒƒã‚¯ã—ã¾ã—ãŸã€‚\nç†ç”±: {self.reason.value}",
                ephemeral=True
            )
        except Exception as e:
            await interaction.response.send_message(
                f"âš ï¸ ã‚­ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸ: {e}",
                ephemeral=True
            )

@bot.tree.command(name="user_kick", description="æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚­ãƒƒã‚¯ã—ã¾ã™")
@app_commands.describe(user="ã‚­ãƒƒã‚¯ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼")
async def user_kick(interaction: Interaction, user: Member):
    # è‡ªåˆ†è‡ªèº«ã‚„Botã‚’ã‚­ãƒƒã‚¯ã—ãªã„ã‚ˆã†ã«ãƒã‚§ãƒƒã‚¯
    if user == interaction.user:
        await interaction.response.send_message("âš ï¸ è‡ªåˆ†è‡ªèº«ã¯ã‚­ãƒƒã‚¯ã§ãã¾ã›ã‚“ã€‚", ephemeral=True)
        return
    if user == interaction.guild.me:
        await interaction.response.send_message("âš ï¸ Botè‡ªèº«ã¯ã‚­ãƒƒã‚¯ã§ãã¾ã›ã‚“ã€‚", ephemeral=True)
        return

    # æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    if not interaction.user.guild_permissions.kick_members:
        await interaction.response.send_message("âš ï¸ ã‚ãªãŸã«ã¯ã‚­ãƒƒã‚¯æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚", ephemeral=True)
        return

    await interaction.response.send_modal(KickModal(user))

# âœ… Botèµ·å‹•ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ã¯å®‰å…¨ã«ç®¡ç†ã—ã¦ãã ã•ã„ï¼‰
bot.run("MTQzMjExMzIxMzU3ODkzNjMyMA.GU2zUp.7mw0Dky-H7H7inqFHZTklwy13xF-8ravHyYHw4")
